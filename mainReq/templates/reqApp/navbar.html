{% load reqApp_tags %}

<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar_content">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
      <span class="navbar-brand">MainReq </span>
    </div>
    <div class="collapse navbar-collapse" id="navbar_content">
      <ul class="nav navbar-nav">
        <li {% ifequal navbar.1 "project" %} class="active" {% endifequal %} class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Proyecto <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a progressbar href="{% url 'reqApp:IC' %}">Hitos{% ifequal navbar.2 "IC" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:UT' %}">Tipos de Usuario{% ifequal navbar.2 "UT" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:UR' %}">Requisitos de Usuario{% ifequal navbar.2 "UR" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:SR' %}">Requisitos de Software{% ifequal navbar.2 "SR" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:MD' %}">Módulos{% ifequal navbar.2 "MD" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:TC' %}">Casos de Prueba{% ifequal navbar.2 "TC" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
          </ul>
        </li>
        <li {% ifequal navbar.1 "documents" %} class="active" {% endifequal %} class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentos <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a progressbar href="{% url 'reqApp:docReq' %}">Documento de Requisitos{% ifequal navbar.2 "requirements" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:docDsn' %}">Documento de Diseño{% ifequal navbar.2 "design" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:docTC' %}">Documento de Casos de Prueba{% ifequal navbar.2 "tc" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:docHis' %}">Documento Histórico{% ifequal navbar.2 "historic" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
          </ul>
        </li>
        <li {% ifequal navbar.1 "tools" %} class="active" {% endifequal %} class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Herramientas <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a progressbar href="{% url 'reqApp:tasks' %}">Tareas{% ifequal navbar.2 "tasks" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:statistics' %}">Estadísticas{% ifequal navbar.2 "statistics" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:matrices' %}">Matrices de Trazado{% ifequal navbar.2 "matrices" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:consistency' %}">Consistencia de Relaciones{% ifequal navbar.2 "consistency" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
            <li><a progressbar href="{% url 'reqApp:registry' %}">Bitácora{% ifequal navbar.2 "registry" %} <span class="glyphicon glyphicon-arrow-left"></span>{% endifequal %}</a></li>
          </ul>
        </li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
            <a class="dropdown-toggle" href="#" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span> {{ user }} <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
                <li role="presentation" class="dropdown-header">Nombre</li>
                <li role="presentation"><a>{{ user.first_name }} {{ user.last_name }}</a></li>
                <li role="presentation" class="dropdown-header">Email</li>
                <li role="presentation"><a>{{ user.email }}</a></li>
                <li role="presentation" class="dropdown-header">Rol</li>
                <li role="presentation">
                    <a>
                    {% for role in user.groups.all %}
                        {{ role }}, 
                    {% endfor %}
                    </a>
                </li>
                {% with project=request|userProject %}
                    <li role="presentation" class="dropdown-header">Proyecto Actual</li>
                    <li role="presentation"><a>{{ project.name }}</a></li>
                {% endwith %}
                <li role="presentation" class="divider"></li>
                {% ifequal user.userprofile.projects.count 1 %}{% else %}
                    <li><a href="{% url 'reqApp:PR' %}"><span class="glyphicon glyphicon-list"></span> Proyectos</a></li>
                {% endifequal %}
                <li><a href="{% url 'reqApp:editUser' %}?next={% firstof request.path '/' %}"><span class="glyphicon glyphicon-cog"></span> Cuenta</a></li>
                {% if user.is_staff %}{% if user.is_superuser %}
                    <li><a href="/admin">Administración</a></li>
                {% endif %}{% endif %}
                <li><a href="{% url 'reqApp:logout' %}"><span class="glyphicon glyphicon-remove"></span> Salir</a></li>
            </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
