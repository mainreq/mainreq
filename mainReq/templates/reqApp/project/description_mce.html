{% load reqApp_tags %}

{% if not identifierText %}
    {% with myAttrs="id:description_new" %}
        {{ form.description|attr:myAttrs }}
    {% endwith %}
{% else %}
    {% with myAttrs="id:description_"|concat:identifierText %}
        {{ form.description|attr:myAttrs }}
    {% endwith %}
{% endif %}

<script type="text/javascript">
tinyMCE.init({
    "width":"100%",
    "theme_advanced_blockformats": "p",
    "theme_advanced_resizing": true,
    "theme_advanced_statusbar_location": "bottom",
    "theme_advanced_buttons3": "",
    "plugins": "yenimg",
    "relative_urls": false,
    "language": "en", 
    "theme_advanced_buttons1": "formatselect,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,outdent,indent,|,bullist,numlist,|,browseimg,imgurl,|,removeformat,|,undo,redo",
    //"editor_selector": "mcemainreq",
    "directionality": "ltr",
    "theme_advanced_buttons2": "",
    "theme": "advanced",
    "strict_loading_mode": 1,
    "mode": "exact",
    {% if not identifierText %}
        "elements":"description_new",
    {% else %}
        "elements":"{{ 'description_'|concat:identifierText }}",
    {% endif %}
})

var id = '#' +
    {% if not identifierText %}
    "description_new"
    {% else %}
    "{{ 'description_'|concat:identifierText }}"
    {% endif %}
    + '_browseimg';

var id_tooltip = id + '_voice';
var tooltip = $(id_tooltip).html();
var _url = "{% url 'reqApp:mce_upload_image' %}";
var _csrf = "{{ csrf_token }}";
$(id).replaceWith('<div class="tinymceImg" style="background:url({{ STATIC_URL }}tiny_mce/plugins/yenimg/img/img2.gif) no-repeat center;"><input id="'+id+'" title="'+tooltip+'" type="file" accept="image/*" onclick="return imgAlignMessage()" onchange="insertMceImg(this, \''+_url+'\', \''+_csrf+'\')"></div>');
</script>
